{% extends "layout.html" %}

{% block content %}
    <div style="text-align: center; margin-bottom: 30px;">
        <h2 style="color: var(--uvm-green); font-size: 2em;">Campus Lost & Found Dashboard ðŸŽ’ðŸ”‘</h2>
        <p style="color: #666; font-size: 1.1em;">Help reunite lost items with their owners!</p>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 30px;">
        <div>
            <div style="background: linear-gradient(135deg, #dc3545 0%, #c82333 100%); color: white; padding: 15px; border-radius: 8px 8px 0 0; margin-bottom: 0;">
                <h3 style="margin: 0; font-size: 1.5em;">ðŸ˜­ Lost Items</h3>
                <p style="margin: 5px 0 0 0; opacity: 0.9;">{{ lost_posts|length }} items waiting to be found</p>
            </div>

            <div style="background-color: white; border: 2px solid #dc3545; border-top: none; border-radius: 0 0 8px 8px; padding: 20px; min-height: 200px;">
                {% if lost_posts %}
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        {% for post in lost_posts %}
                            <div class="post-card lost-link" style="padding: 15px; border-left: 5px solid #dc3545; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <a href="/lost/{{ post.lost_id }}" style="text-decoration: none; color: #333;">
                                        <h4 style="margin: 0;">{{ post.item_name }} ({{ post.category }})</h4>
                                        <p style="margin: 5px 0 0 0; font-size: 0.9em; color: #666;">
                                            Lost on: {{ post.date_lost }} in {{ post.last_seen_location }}
                                        </p>
                                    </a>
                                </div>
                                <div style="display: flex; align-items: center;">
                                    <span class="status-{{ post.status }}" style="margin-right: 15px;">{{ post.status | capitalize }}</span>
                                    {% if post.user_id == user_id or user_role == 'admin' %}
                                        <form action="/delete-lost/{{ post.lost_id }}" method="post" onsubmit="return confirm('Are you sure you want to delete this lost report?');">
                                            <button type="submit" class="delete-btn" style="background-color: #dc3545; color: white; border-radius: 4px; padding: 5px 10px; border: none; cursor: pointer; font-size: 0.9em;">Delete</button>
                                        </form>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div style="text-align: center; padding: 40px 20px; color: #999;">
                        <p style="font-size: 1.2em; margin-bottom: 10px;">ðŸŽ‰ Nothing is currently listed as lost!</p>
                        <p>Be the first to <a href="/add-lost" style="color: #dc3545; font-weight: bold;">report a lost item</a>.</p>
                    </div>
                {% endif %}
            </div>
        </div>

        <div>
            <div style="background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%); color: white; padding: 15px; border-radius: 8px 8px 0 0; margin-bottom: 0;">
                <h3 style="margin: 0; font-size: 1.5em;">âœ¨ Found Items</h3>
                <p style="margin: 5px 0 0 0; opacity: 0.9;">{{ found_posts|length }} items ready to be returned</p>
            </div>

            <div style="background-color: white; border: 2px solid #28a745; border-top: none; border-radius: 0 0 8px 8px; padding: 20px; min-height: 200px;">
                {% if found_posts %}
                    <div style="display: flex; flex-direction: column; gap: 15px;">
                        {% for post in found_posts %}
                            <div class="post-card found-link" style="padding: 15px; border-left: 5px solid #28a745; display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <a href="/found/{{ post.found_id }}" style="text-decoration: none; color: #333;">
                                        <h4 style="margin: 0;">{{ post.item_name }} ({{ post.category }})</h4>
                                        <p style="margin: 5px 0 0 0; font-size: 0.9em; color: #666;">
                                            Found on: {{ post.date_found }} in {{ post.found_location }}
                                        </p>
                                    </a>
                                </div>
                                <div style="display: flex; align-items: center;">
                                    <span class="status-{{ post.status }}" style="margin-right: 15px;">{{ post.status | capitalize }}</span>
                                    {% if post.user_id == user_id or user_role == 'admin' %}
                                        <form action="/delete-found/{{ post.found_id }}" method="post" onsubmit="return confirm('Are you sure you want to delete this found report?');">
                                            <button type="submit" class="delete-btn" style="background-color: #dc3545; color: white; border-radius: 4px; padding: 5px 10px; border: none; cursor: pointer; font-size: 0.9em;">Delete</button>
                                        </form>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                {% else %}
                    <div style="text-align: center; padding: 40px 20px; color: #999;">
                        <p style="font-size: 1.2em; margin-bottom: 10px;">ðŸ“¦ No found items currently!</p>
                        <p>No items have been turned in yet.</p>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div style="text-align: center; margin-top: 40px; padding: 30px; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <h3 style="color: var(--uvm-green); margin-bottom: 15px;">Need to report an item?</h3>
        <div style="display: flex; justify-content: center; gap: 20px;">
            <a href="/add-lost" style="background-color: #dc3545; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; font-weight: bold;">
                Report Lost Item ðŸ˜­
            </a>
            <a href="/add-found" style="background-color: #28a745; color: white; padding: 12px 30px; text-decoration: none; border-radius: 6px; font-weight: bold;">
                Report Found Item âœ¨
            </a>
        </div>
    </div>
{% endblock %}